{% extends "blank.html" %}



<!-- page specific plugin styles -->
{% block styles %}
<style>
    #map_wrapper {
        height: 500px;
        margin-top: 30px;
        margin-bottom: 20px;
    }
    
    #map_canvas {
        width: 100%;
        height: 100%;
    }
    
    #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto', 'sans-serif';
        line-height: 30px;
        padding-left: 10px;
    }
    
    #right-panel {
        font-family: 'Roboto', 'sans-serif';
        line-height: 30px;
        padding-left: 10px;
    }
    
    #right-panel select,
    #right-panel input {
        font-size: 15px;
    }
    
    #right-panel select {
        width: 100%;
    }
    
    #right-panel i {
        font-size: 12px;
    }
    
    #right-panel {
        height: 100%;
        float: right;
        width: 390px;
        overflow: auto;
    }
    
    #map {
        margin-right: 400px;
    }
    
    #floating-panel {
        background: #fff;
        padding: 5px;
        font-size: 14px;
        font-family: Arial;
        border: 1px solid #ccc;
        box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
        display: none;
    }
    
    @media print {
        #map {
            height: 500px;
            margin: 0;
        }
        #right-panel {
            float: none;
            width: auto;
        }
    }
</style>
<!-- end ofpage specific plugin styles -->
{% endblock %}
<!-- -->
{% block navigator%}
<li>
    <a href="#">Get directions</a>
</li>

{% endblock %}

<!-- navbar code-->
{% block navbar %}
<ul class="nav nav-list">
    <li class="">
        <a href="{{('index')}}">
            <i class="menu-icon fa fa-dashboard"></i>
            <span class="menu-text"> Dashboard </span>
        </a>
        <b class="arrow"></b>
    </li>

    <li class="">
        <a href="{{('Patientnotification')}}">
            <i class="menu-icon fa fa-user-md"></i>
            <span class="menu-text">Patients Notifications</span>
        </a>

        <b class="arrow"></b>
    </li>

    <li class="">
        <a href="{{('getdirections')}}">
            <i class="menu-icon fa fa-compass"></i>
            <span class="menu-text"> Get Direction </span>
        </a>
        <b class="arrow"></b>
    </li>

    <li class="">
        <a href="index.html">
            <i class="menu-icon fa fa-anchor"></i>
            <span class="menu-text"> Distance Matrix </span>
        </a>
        <b class="arrow"></b>
    </li>

    <li class="">
        <a href="{{('mapview')}}">
            <i class="menu-icon fa fa-desktop"></i>
            <span class="menu-text">Map View</span>
        </a>

        <b class="arrow"></b>
    </li>

    <li class="active open">
        <a href="{{('test')}}">
            <i class="menu-icon fa fa-hospital-o"></i>
            <span class="menu-text"> Hospitals </span>
        </a>

        <b class="arrow"></b>
    </li>

    <li class="">
        <a href="{{('patients')}}">
            <i class="menu-icon fa fa-user-md"></i>
            <span class="menu-text">Patients</span>
        </a>

        <b class="arrow"></b>
    </li>

    <li class="">
        <a href="#" class="dropdown-toggle">
            <i class="menu-icon fa fa-user"></i>

            <span class="menu-text">
                    Manage Users
                    <span class="badge badge-primary">2</span>
            </span>

            <b class="arrow fa fa-angle-down"></b>
        </a>

        <b class="arrow"></b>

        <ul class="submenu">
            <li class="">
                <a href="{{('newpatient')}}">
                    <i class="menu-icon fa fa-wheelchair"></i> Patients
                </a>

                <b class="arrow"></b>
            </li>

            <li class="">
                <a href="{{('newadministrator')}}">
                    <i class="menu-icon fa fa-cogs"></i> Administrators
                </a>

                <b class="arrow"></b>
            </li>

            <li class="">
                <a href="{{('newadministrator')}}">
                    <i class="menu-icon fa fa-ambulance"></i> Response Team
                </a>

                <b class="arrow"></b>
            </li>

        </ul>
    </li>

    <li class="">
        <a href="{{('ViewIncidents')}}">
            <i class="menu-icon fa fa-book"></i>
            <span class="menu-text">History</span>
        </a>

        <b class="arrow"></b>
    </li>
</ul>
<!-- end navbar code -->
{% endblock %}


<!-- page content code-->
{% block content %}
<div id="map_wrapper">
    <div id="map_canvas" class="mapping">
        <div id="right-panel"></div>
    </div>

</div>
<div id="right-panel"></div>
{% endblock %}
<!-- end of page content code-->

<!-- page specific plugin scripts -->
{% block javascript %}
<<<<<<< HEAD
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAjr3yQIuvCqJPfMRVwNh5SOWfI9uy35ww&callback=initialize" async defer></script>
=======
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdeObotK5Ch7wK7tPvcX8pffSWXpBz-V8&callback=initialize" async defer></script>
>>>>>>> a0db0f1b4cac7998601b97a7544d393746066fe3
<!-- inline scripts related to this page -->

<script>
    var map;
    var longitude;
    var marker;
    jQuery(function($) {
        // Asynchronously Load the map API 
        var script = document.createElement('script');
        document.body.appendChild(script);
    });

    function initialize() {
        //var map;
        var labels = 'H';
        var bounds = new google.maps.LatLngBounds();
        var mapOptions = {
            mapTypeId: 'roadmap'
        };

        // Display a map on the page
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        map.setTilt(45);

        // Multiple Markers
        var markers = [
            ['shashi hospital , Bindura', -17.2991511, 31.323526],
            ['Bindura General Hospital, Bindura', -17.2935824, 31.3257432],
            ['Bindura Medi-Clinic, Bindura', -17.297246, 31.3281581],
            ['Taruku Health Centre, Bindura', -17.3029982, 31.3262822]
        ];

        // Info Window Content
        var infoWindowContent = [
            ['<div class="info_content">' +
                '<h3>shashi hospital</h3>' +
                '<h2> <img style="height:200px" src="static/assets/images/gallery/image-4.jpg" alt /></h2>' +
                '<p>The London Eye is a giant Ferris wheel situated on the banks of the River Thames. The entire structure is 135 metres (443 ft) tall and the wheel has a diameter of 120 metres (394 ft).</p>' +
                '<input  type="button" value="Get Route" onclick="calcRoute()">' +
                '<input id="start" type="text" value="" style="width: 300px;">' + '</div>'
            ],
            ['<div class="info_content">' +
                '<h3>Bindura General Hospital</h3>' +
                '<p>The Palace of Westminster is the meeting place of the House of Commons and the House of Lords, the two houses of the Parliament of the United Kingdom. Commonly known as the Houses of Parliament after its tenants.</p>' +
                '</div>'
            ],
            ['<div class="info_content">' +
                '<h3>Bindura Medi-Clinic</h3>' +
                '<p>The Palace of Westminster is the meeting place of the House of Commons and the House of Lords, the two houses of the Parliament of the United Kingdom. Commonly known as the Houses of Parliament after its tenants.</p>' +
                '</div>'
            ],
            ['<div class="info_content">' +
                '<h3>Taruku Health Centre</h3>' +
                '<p>The Palace of Westminster is the meeting place of the House of Commons and the House of Lords, the two houses of the Parliament of the United Kingdom. Commonly known as the Houses of Parliament after its tenants.</p>' +
                '<input  type="button" value="Get Route" onclick="calcRoute()">' +
                '</div>'
            ]

        ];

        // Display multiple markers on a map
        var infoWindow = new google.maps.InfoWindow(),
            i;

        // Loop through our array of markers & place each one on the map  
        for (i = 0; i < markers.length; i++) {
            var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
            bounds.extend(position);
            marker = new google.maps.Marker({
                position: position,
                map: map,
                draggable: true,
                animation: google.maps.Animation.DROP,
                label: labels,
                title: markers[i][0]
            });
            console.log(position);

            // Allow each marker to have an info window    
            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    infoWindow.setContent(infoWindowContent[i][0]);
                    infoWindow.open(map, marker);
                }

            })(marker, i));

            // Automatically center the map fitting all markers on the screen
            map.fitBounds(bounds);
        }


        marker.addListener('click', toggleBounce);

        function toggleBounce() {
            //console.log(marker.position.lat);
            if (marker.getAnimation() !== null) {
                marker.setAnimation(null);
            } else {
                marker.setAnimation(google.maps.Animation.BOUNCE);
            }
        }

        // Override our map zoom level once our fitBounds function runs (Make sure it only runs once)
        var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function(event) {
            this.setZoom(14);
            google.maps.event.removeListener(boundsListener);
        });

        marker.addListener('click', function() {
            var long = marker.getPosition().lng();
            longitude = long;

            var latt = marker.getPosition().lat();
            console.log(long);
        });

        console.log(longitude);
    }



    function calcRoute() {
        /*  if (navigator.geolocation) {
        	 navigator.geolocation.getCurrentPosition(function(position) {
        		 var pos = {
        			 lat: position.coords.latitude,
        			 lng: position.coords.longitude
        		 };
        	 }, function() {
        		 handleLocationError(true, infoWindow, map.getCenter());
        	 });
         } else {
        	 // Browser doesn't support Geolocation
        	 handleLocationError(false, infoWindow, map.getCenter());
         } */

        var mymap = map;
        console.log(mymap);
        var directionsService = new google.maps.
        DirectionsService();

        var directionsDisplay;
        directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setMap(mymap);
        directionsDisplay.setPanel(document.getElementById('right-panel'));

        var start = new google.maps.LatLng(-17.310495, 31.3230222);
        var end = new google.maps.LatLng(-17.30192, 31.33056);
        var request = {
            origin: start,
            destination: end,
            travelMode: 'DRIVING'
        };

        directionsService.route(request, function(result, status) {
            if (status == 'OK') {
                directionsDisplay.setDirections(result);
            } else {
                alert("could not calculate directions. Try again, or buy a map!");
            }
        });


    }
</script>
<!-- page javascripts end -->
{% endblock %}